<button id="openBtn">Open popup</button>

<script>
const POPUP_NAME = 'DecisionsPopupWindow'; // stable name -> easy to spot in DevTools

function openPopup() {
  // build your final URL as you already do
  const finalUrl = 'http://localhost/Primary/?FlowId=01JWDY...&patientID=P001&alertID=A100&practiceID=PRAC1';

  const features = 'width=1100,height=700,left=200,top=100,resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=no,status=no';
  const popup = window.open('', POPUP_NAME, features);

  // Make the popup show a descriptive title (helps DevTools list it)
  popup.document.open();
  popup.document.write(`
    <!doctype html>
    <html>
      <head><title>Decisions Popup — ${POPUP_NAME}</title></head>
      <body style="margin:0">
        <div style="padding:8px;background:#eee;border-bottom:1px solid #ccc">
          <strong>Decisions Popup</strong> — ${POPUP_NAME}
        </div>
        <iframe id="theFrame" src="${finalUrl}" style="border:0;width:100%;height:calc(100vh - 40px)"></iframe>
      </body>
    </html>
  `);
  popup.document.close();

  // helpful: log popup ref so you can "store as global variable" from console -> then inspect it
  console.log('popup handle:', popup);
  // If you want to debug in DevTools console quickly you can click the logged object and "Store as global variable"
}

document.getElementById('openBtn').addEventListener('click', openPopup);
</script>
